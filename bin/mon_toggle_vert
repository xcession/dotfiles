#!/bin/sh

# Get out of town if something errors
set -e

# LVDS1_STATUS=$(</sys/class/drm/card0-LVDS-1/status)
DP2_STATUS=$(</sys/class/drm/card0-DP-2/status)

if [ "connected" == "$DP2_STATUS" ]; then
  xrandr --output LVDS1 --primary --auto --rotate normal
  xrandr --output DP2 --auto --rotate right --right-of LVDS1
  bspc monitor DP2 -d VI VII VIII IX X
  bspc monitor LVDS1 -d I II III IV V
  notify-send --urgency=low -t 5000 "Graphics Update" "DP2 connected"
else
  xrandr --output LVDS1 --primary --auto --rotate normal
  xrandr --output DP2 --off
  bspc monitor LVDS1 -d I II III IV V VI VII VIII IX X
  notify-send --urgency=low -t 5000 "Graphics Update" "External monitor disconnected"
fi

nitrogen --restore
