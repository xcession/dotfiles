# $HOME/.config/i3/config
#
# o┏━┓┓ ┳┏┏┓
# ┃ ━┫┃┃┃┃┃┃
# ┛┗━┛┗┻┛┛ ┛
# i3wm config
#
# GitHub:       https://github.com/xcession/dotfiles
# Maintainer:   Пэйнт (Tharawut Paripaiboon)

# i3 config file (v4)

#: Autostart {{{

# run once: exec
# run with reload: exec_always

# polkit
exec --no-startup-id /usr/bin/lxpolkit &

# desktop notification
exec --no-startup-id /usr/bin/dunst

# network manager
exec --no-startup-id nm-applet

# make numlock active
exec --no-startup-id numlockx on

exec_always --no-startup-id xrdb -load $HOME/.Xresources

# autotiling
exec_always --no-startup-id autotiling

# clamshell detect
exec_always --no-startup-id $HOME/bin/i3_clamshell

# polybar
exec_always --no-startup-id $HOME/.config/polybar/launch.sh

#: }}}

#: Variables {{{

# mod key used for most binds
# Mod1 = Alt
# Mod4 = Super
# (Use the `xmodmap` command to list them all)
set $mod Mod4

# direction keys
set $up k
set $down j
set $left h
set $right l

# preferred terminal
set $term alacritty

# preferred file manager
set $filemanager pcmanfm

# define workspace
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "0"

# define monitor
# (Use the 'xrandr --listmonitors')
set $laptop "LVDS1"
set $mon1 "DisplayPort-0"
set $mon2 "HDMI-A-1"

# bar and window color
set $bg-color               #16161c
set $text-color             #fdf0ed
set $active-bg-color        #09f7a0
set $active-text-color      #16161c
set $inactive-bg-color      #232530
set $inactive-text-color    #6c6f93
set $urgent-bg-color        #f43e5c
set $indicator-color        #fab28e

set $border_size 2

# preferred application launcher
# Note: pass the final command to i3-msg so that the resulting window can be opened
# on the original workspace that the command was run on.
set $launcher ulauncher
set $menu dmenu_run -m 0 -i \
  -fn 'Roboto Condensed-10:Bold' \
  -nb '#16161c' -nf '#fdf0ed' \
  -sb '#29d398' -sf '#16161c' \
  | xargs i3-msg exec --
#: }}}

#: Initialize workspace {{{

focus_follows_mouse yes
default_orientation horizontal

# workspace_layout default|stacking|tabbed
workspace_layout default

workspace $ws1 output $mon1
workspace $ws2 output $mon1
workspace $ws3 output $mon1
workspace $ws4 output $mon1
workspace $ws5 output $mon1
workspace $ws6 output $mon2
workspace $ws7 output $mon2
workspace $ws8 output $mon2
workspace $ws9 output $mon2
workspace $ws10 output $mon2

#: }}}

#: Output configuration {{{

# font
font pango:Noto Sans 9

# wallpaper
exec_always --no-startup-id nitrogen --restore

#: }}}

#: Idle configuration {{{

# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
# exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork
# exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock -c 00000088 -i ~/.wallpaper.jpg --nofork
exec --no-startup-id xss-lock --transfer-sleep-lock -- ~/bin/lockscreen
# bindsym $mod+shift+x exec --no-startup-id xkb-switch -s us && xss-lock --transfer-sleep-lock -- i3lock -c 00000088 -i ~/.wallpaper.jpg --nofork
bindsym $mod+shift+backslash exec --no-startup-id ~/bin/lockscreen

#: }}}

#: Input configuration {{{

# keyboard layouts
exec --no-startup-id setxkbmap -layout gb,us,th -option grp:alt_shift_toggle

# thinkpad trackpoint
exec --no-startup-id xinput set-prop "TPPS/2 IBM TrackPoint" "Device Enabled" 1
exec --no-startup-id xinput set-prop "TPPS/2 IBM TrackPoint" "libinput Natural Scrolling Enabled" 1
exec --no-startup-id xinput set-prop "TPPS/2 IBM TrackPoint" "libinput Middle Emulation Enabled" 1

# thinkpad trackpad
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "Device Enabled" 0
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "libinput Tapping Enabled" 1
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "libinput Natural Scrolling Enabled" 1
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "libinput Middle Emulation Enabled" 1

# MX Master 2S
exec --no-startup-id xinput set-prop "pointer:Logitech MX Master 2S" "Device Enabled" 1
exec --no-startup-id xinput set-prop "pointer:Logitech MX Master 2S" "libinput Natural Scrolling Enabled" 1

#: }}}

#: Window control {{{

# border & title
for_window [class="^.*"] border pixel $border_size, \
  title_format "<b> %class >> %title </b>"

default_border pixel $border_size
default_floating_border pixel $border_size

# hide_edge_borders none|vertical|horizontal|both|smart
hide_edge_borders smart

# window colors
# client    border    background \
#   text    indicator
client.focused            $active-bg-color    $active-bg-color \
  $active-text-color      $indicator-color
client.unfocused          $inactive-bg-color  $bg-color \
  $inactive-text-color    $indicator-color
client.focused_inactive   $inactive-bg-color	$inactive-bg-color \
  $inactive-text-color    $indicator-color
client.urgent             $urgent-bg-color    $urgent-bg-color \
  $active-text-color      $indicator-color

# switch to workspace with urgent window
for_window [urgent="latest"]    focus
focus_on_window_activation      focus

#: }}}

#: i3-gaps {{{

# gaps
gaps inner 8
gaps outer 0

# only enable gaps on a workspace when there is at least one window
smart_gaps on

# smart borders will draw borders on windows only if there is more than one
# window in a workspace. This feature can also be enabled only if the gap size
# between widnow and screen edge is 0
smart_borders on
smart_borders no_gaps

#}}}

#: Key bindings {{{

# To list all of the current keys mapping, use `xmodmap -pke` command.
# To interactively enter a key and see what keysym it is configured to,
# use `xev`.
#
# Syntax:
# bindsym [--release] [<Group>+][<Modifiers>+]<keysym> command
# bindcode [--release] [<Group>+][<Modifiers>+]<keycode> command

#: Basic {{{

# terminal
bindsym $mod+t          exec --no-startup-id $term
bindsym $mod+Return     exec --no-startup-id $term

# file manager
bindsym $mod+Shift+Return exec --no-startup-id $filemanager

# kill focused window
bindsym $mod+Shift+q kill
bindsym Mod1+q kill
bindsym Mod1+F4 kill

# launcher
bindsym Control+space exec $launcher
bindsym $mod+d exec $menu

# Drag floating windows by holding down $mod and left mouse button.
# Resize them with right mouse button + $mod.
# Despite the name, also works for non-floating windows.
floating_modifier $mod

# reload the configuration file
bindsym $mod+Shift+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"

#: }}}

#: Moving around {{{

# move focus around
bindsym $mod+$up    focus up
bindsym $mod+$down  focus down
bindsym $mod+$left  focus left
bindsym $mod+$right focus right
# Or use $mod+[up|down|left|right]
bindsym $mod+Up     focus up
bindsym $mod+Down   focus down
bindsym $mod+Left   focus left
bindsym $mod+Right  focus right

# move focused window
bindsym $mod+Shift+$up      move up     10px
bindsym $mod+Shift+$down    move down   10px
bindsym $mod+Shift+$left    move left   10px
bindsym $mod+Shift+$right   move right  10px
# Or use $mod+Shift+[up|down|left|right]
bindsym $mod+Shift+Up       move up     10px
bindsym $mod+Shift+Down     move down   10px
bindsym $mod+Shift+Left     move left   10px
bindsym $mod+Shift+Right    move right  10px

#: }}}

#: Workspaces {{{

workspace_auto_back_and_forth yes

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# switch to next or previous workspace
bindsym $mod+Mod1+Left workspace prev
bindsym $mod+Mod1+Right workspace next

# move focused window to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1; workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2; workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3; workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4; workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5; workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6; workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7; workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8; workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9; workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10; workspace number $ws10

#: }}}

#: Layouts {{{

# split layout
bindsym $mod+b split h
bindsym $mod+v split v

# switch between layouts
bindsym $mod+Shift+s layout stacking
bindsym $mod+Shift+w layout tabbed
bindsym $mod+Shift+e layout toggle split

# make the current focus fullscreen
bindsym $mod+f fullscreen toggle

# toggle the current focus between tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# move focus between parent / child windows
bindsym $mod+a focus parent
bindsym $mod+c focus child

#: }}}

#: Scratchpad {{{

# i3 has a "scratchpad", which is a bag of holding for windows.
# You can send windows there and get them back later.

# move the current focus window to the scratchpad
bindsym $mod+Shift+minus move scratchpad

# Show the next scratchpad window or hide the current focus scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+minus scratchpad show

#: }}}

#: Resizing windows {{{

mode "resize" {
  # up will shrink the window’s height.
  # down will grow the window’s height.
  # left will shrink the window’s width.
  # right will grow the window’s width.
  bindsym $left   resize shrink   width   10 px or 10 ppt
  bindsym $down   resize grow     height  10 px or 10 ppt
  bindsym $up     resize shrink   height  10 px or 10 ppt
  bindsym $right  resize grow     width   10 px or 10 ppt

  # same bindings, but for the arrow keys
  bindsym Left    resize shrink   width   10 px or 10 ppt
  bindsym Down    resize grow     height  10 px or 10 ppt
  bindsym Up      resize shrink   height  10 px or 10 ppt
  bindsym Right   resize grow     width   10 px or 10 ppt

  # back to normal
  bindsym Return mode "default"
  bindsym Escape mode "default"
  bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

#: }}}

#: Border & Gaps {{{

bindsym $mod+Shift+b border toggle

# changing border style
# bindsym $mod+n border normal
# bindsym $mod+y border pixel $border_size
# bindsym $mod+u border none

# change gaps
# bindsym $mod+plus                   gaps inner current plus  5
# bindsym $mod+minus                  gaps inner current minus 5
# bindsym $mod+Shift+plus             gaps outer current plus  5
# bindsym $mod+Shift+minus            gaps outer current minus 5
# bindsym $mod+Control+plus           gaps inner all     plus  5
# bindsym $mod+Control+minus          gaps inner all     minus 5
# bindsym $mod+Control+Shift+plus     gaps outer all     plus  5
# bindsym $mod+Control+Shift+minus    gaps outer all     minus 5

#: }}}

#: Media control {{{

# audio
bindsym XF86AudioMute           exec amixer set Master toggle
bindsym XF86AudioMicMute        exec amixer set Capture toggle
bindsym XF86AudioRaiseVolume    exec amixer set Master 2.5%+,5%+;
bindsym XF86AudioLowerVolume    exec amixer set Master 2.5%-,5%-;

# play/pause keys for spotify
bindsym XF86AudioPlay exec dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause
bindsym XF86AudioNext exec dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next
bindsym XF86AudioPrev exec dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous

#: }}}

#: Misc {{{

# backlight
bindsym XF86MonBrightnessUp     exec --no-startup-id xbacklight -inc 10 ; exec --no-startup-id notify-send 'Brightness UP' -u low"
bindsym XF86MonBrightnessDown   exec --no-startup-id xbacklight -dec 10 ; exec --no-startup-id notify-send 'Brightness DOWN' -u low"

# screenshot
bindsym Print exec --no-startup-id "flameshot gui -p $HOME/Pictures"

# Splatmoji
bindsym $mod+slash exec "splatmoji copy"

#: }}}

#: }}}

#: Statusbar {{{

# bar {
# 	status_command i3status
# 	tray_output primary
# 	position top

# 	colors {
# 		background $bg-color
# 		separator $inactive-text-color
# 		#                   border              background          text
# 		focused_workspace   $active-bg-color    $active-bg-color    $bg-color
# 		inactive_workspace  $bg-color           $inactive-bg-color  $active-bg-color
# 		urgent_workspace    $urgent-bg-color    $urgent-bg-color    $text-color
# 	}
# }

#: }}}

#: Application Settings {{{

# assign applications to specific workspace
assign [class="(?i)(?:firefox)"] \
  $ws1

for_window [class="VirtualBox Manager"] \
  move --no-auto-back-and-forth to workspace $ws10

for_window [class="VirtualBox Machine"] \
  move --no-auto-back-and-forth to workspace $ws9

for_window [class="Spotify"] \
  move --no-auto-back-and-forth to workspace $ws10

# focus, floating, & sticky
for_window [class="(?i)(?:qt5ct|pinentry)"] \
  floating enable, focus
for_window [title="(?i)(?:copying|deleting|moving)"] \
  floating enable
for_window [window_role="(?i)(?:about|pop-up|setup)"] \
  floating enable
for_window [class="Yad" instance="yad"] \
  floating enable

# Android Studio
for_window [title="win0"] \
  floating enable
for_window [title="Welcome to Android Studio"] \
  floating false
for_window [title="Android Emulator"] \
  floating enable
# GOG Games installer
for_window [class="(?i)(?:mojosetup)"] \
  floating enable
# Flameshot
for_window [class="(?i)(?:flameshot)"] \
  floating enable

popup_during_fullscreen smart

#: }}}

# vim:fileencoding=utf-8:ft=conf:foldmethod=marker
